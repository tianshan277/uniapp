(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-API-login-login"],{"2c7d":function(n,i,e){var t=e("f3e8");"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var o=e("4f06").default;o("79d3f435",t,!0,{sourceMap:!1,shadowMode:!1})},3543:function(n,i,e){"use strict";e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return t}));var t={pageHead:e("4788").default},o=function(){var n=this,i=n.$createElement,e=n._self._c||i;return e("v-uni-view",[e("page-head",{attrs:{title:n.title}}),e("v-uni-view",{staticClass:"uni-padding-wrap"},[e("v-uni-view",{staticStyle:{background:"#FFF",padding:"40rpx"}},[!0===n.hasLogin?[e("v-uni-view",{staticClass:"uni-h3 uni-center uni-common-mt"},[n._v("已登录"),n.isUniverifyLogin?e("v-uni-text",{staticStyle:{"font-size":"0.8em"}},[n.phoneNumber.length?e("i",[n._v("（"+n._s(n.phoneNumber)+"）")]):e("i",{staticClass:"uni-icon_toast uni-loading"})]):n._e()],1),e("v-uni-view",{staticClass:"uni-hello-text uni-center"},[e("v-uni-text",[n._v("每个账号仅需登录 1 次，\\n后续每次进入页面即可自动拉取用户信息。")])],1)]:n._e(),!1===n.hasLogin?[e("v-uni-view",{staticClass:"uni-h3 uni-center uni-common-mt"},[n._v("未登录")]),e("v-uni-view",{staticClass:"uni-hello-text uni-center"},[n._v("请点击按钮登录")])]:n._e()],2),e("v-uni-view",{staticClass:"uni-btn-v uni- uni-common-mt"},n._l(n.providerList,(function(i,t){return e("v-uni-button",{key:t,staticClass:"page-body-button",attrs:{type:"primary",loading:"univerify"===i.id&&n.univerifyBtnLoading},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.tologin(i)}}},[n._v(n._s(i.name))])})),1)],1)],1)},a=[]},"5e2b":function(n,i,e){"use strict";var t=e("4ea4");e("99af"),e("d81d"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=t(e("5530")),a=e("2f62"),u="univerifyInfo",r={data:function(){return{title:"login",providerList:[],phoneNumber:"",univerifyBtnLoading:!1}},computed:(0,o.default)({},(0,a.mapState)(["hasLogin","isUniverifyLogin","univerifyErrorMsg"])),onLoad:function(){var n=this;uni.getProvider({service:"oauth",success:function(i){n.providerList=i.provider.map((function(n){var i="";switch(n){case"weixin":i="微信登录";break;case"qq":i="QQ登录";break;case"sinaweibo":i="新浪微博登录";break;case"xiaomi":i="小米登录";break;case"alipay":i="支付宝登录";break;case"baidu":i="百度登录";break;case"toutiao":i="头条登录";break;case"apple":i="苹果登录";break;case"univerify":i="一键登录";break}return{name:i,id:n}}))},fail:function(n){console.log("获取登录通道失败",n)}}),this.hasLogin&&this.isUniverifyLogin&&this.getPhoneNumber(uni.getStorageSync(u)).then((function(i){n.phoneNumber=i}))},methods:(0,o.default)((0,o.default)((0,o.default)({},(0,a.mapMutations)(["login","setUniverifyLogin"])),(0,a.mapActions)(["getPhoneNumber"])),{},{Toast:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;uni.showToast(Object.assign({},n,{duration:i}))},tologin:function(n){var i=this;"univerify"===n.id&&(this.univerifyBtnLoading=!0),uni.login({provider:n.id,success:function(e){console.log("login success:",e),i.Toast({title:"登录成功"}),i.login(n.id)},fail:function(n){if(console.log("login fail:",n),"30002"==n.code)return uni.closeAuthView(),void i.Toast({title:"其他登录方式"});1e3!=n.code?"30005"!=n.code?"30003"!=n.code&&uni.showModal({showCancel:!1,title:"登录失败",content:JSON.stringify(n)}):uni.showModal({showCancel:!1,title:"预登录失败",content:i.univerifyErrorMsg||n.errMsg}):uni.showModal({title:"登录失败",content:"".concat(n.errMsg,"\n，错误码：").concat(n.code),confirmText:"开通指南",cancelText:"确定",success:function(n){n.confirm&&setTimeout((function(){plus.runtime.openWeb("https://ask.dcloud.net.cn/article/37965")}),500)}})},complete:function(){i.univerifyBtnLoading=!1}})}})};i.default=r},"8ac0":function(n,i,e){"use strict";var t=e("2c7d"),o=e.n(t);o.a},bab8:function(n,i,e){"use strict";e.r(i);var t=e("5e2b"),o=e.n(t);for(var a in t)"default"!==a&&function(n){e.d(i,n,(function(){return t[n]}))}(a);i["default"]=o.a},e01b:function(n,i,e){"use strict";e.r(i);var t=e("3543"),o=e("bab8");for(var a in o)"default"!==a&&function(n){e.d(i,n,(function(){return o[n]}))}(a);e("8ac0");var u,r=e("f0c5"),s=Object(r["a"])(o["default"],t["b"],t["c"],!1,null,"9af7748a",null,!1,t["a"],u);i["default"]=s.exports},f3e8:function(n,i,e){var t=e("24fb");i=t(!1),i.push([n.i,"uni-button[data-v-9af7748a]{background-color:#007aff;color:#fff}",""]),n.exports=i}}]);